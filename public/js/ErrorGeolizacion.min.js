document.addEventListener('DOMContentLoaded', function() {
    const obtenerUbicacionBtn = document.getElementById('obtenerUbicacion');
    
    if (obtenerUbicacionBtn) {
        obtenerUbicacionBtn.addEventListener('click', function() {
            try {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        function(position) {
                            try {
                                document.getElementById('latitud').textContent = position.coords.latitude;
                                document.getElementById('longitud').textContent = position.coords.longitude;
                            } catch (error) {
                                console.error('Error al mostrar coordenadas:', error);
                                alert('Error al procesar la ubicación obtenida');
                            }
                        },
                        function(error) {
                            let errorMessage;
                            switch(error.code) {
                                case error.PERMISSION_DENIED:
                                    errorMessage = "El usuario denegó el permiso de geolocalización.";
                                    break;
                                case error.POSITION_UNAVAILABLE:
                                    errorMessage = "La información de ubicación no está disponible.";
                                    break;
                                case error.TIMEOUT:
                                    errorMessage = "La solicitud de ubicación tardó demasiado tiempo.";
                                    break;
                                case error.UNKNOWN_ERROR:
                                    errorMessage = "Ocurrió un error desconocido.";
                                    break;
                            }
                            alert('Error al obtener la ubicación: ' + errorMessage);
                        }
                    );
                } else {
                    alert('Tu navegador no soporta geolocalización.');
                }
            } catch (error) {
                console.error('Error inesperado:', error);
                alert('Ocurrió un error inesperado al intentar acceder a la geolocalización');
            }
        });
    }
});